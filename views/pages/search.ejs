<!-- searchResults.ejs -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no"
    />

    <link rel="stylesheet" href="/styles/styles.css" />
  </head>
  <body>
    <h1>
      Search Results for "<%= sheetName %>"
      <% if (data.length > 0) { %>
        (<%= (page - 1) * itemsPerPage + 1 %> -
        <%= (page - 1) * itemsPerPage + data.length %> of <%= filteredData.length %>)
      <% } %>
    </h1>

    <% if (data.length === 0) { %>
    <!-- Display the Search Bar Form -->
    <form action="/search" method="GET">
      <input
        type="text"
        id="searchInput"
        name="query"
        placeholder="Enter your search query"
        required
      />
      <button type="submit">Search</button>
    </form>
    <% } %> <% if (data.length > 0) { %>
    <!-- Display Results in a Table -->
    <table>
      <thead>
        <tr>
          <th>ID</th>
          <th>Code</th>
          <th>Type</th>
          <th>Figure 1</th>
          <th>Figure 2</th>
          <th>Figure 3</th>
        </tr>
      </thead>
      <tbody>
        <% data.forEach(item => { %>
        <tr>
          <td><%= item.ID %></td>
          <td><%= item.Code %></td>
          <td><%= item.Type %></td>
          <td><%= item['Figure 1'] || 'N/A' %></td>
          <td><%= item['Figure 2'] || 'N/A' %></td>
          <td><%= item['Figure 3'] || 'N/A' %></td>
        </tr>
        <% }); %>
      </tbody>
    </table>
    <div class="pagination">
      <% for (let i = 1; i <= totalPages; i++) { %>
        <a href="/search?query=<%= encodeURIComponent(query) %>&page=<%= i %>" <% if (currentPage === i) { %>class="active"<% } %>><%= i %></a>
      <% } %>
    </div>
    <a href="/">Go Back to Landing Page</a>
    <% } else { %>
    <!-- Display a Message when No Data is Found -->
    <p>No results found for your search query.</p>
    <a href="/">Go Back to Landing Page</a>
    <% } %>
  </body>
</html>
